---
import PodcastLayout from "../layouts/PodcastLayout.astro";
import SearchBar from "../components/SearchBar.astro";
import type { PodcastData } from "../types/podcast";

import enPodcasts from "../data/podcasts/en.json";

const podcasts = (enPodcasts.podcasts as PodcastData[]).filter(
  (podcast) => podcast.isAvailable,
);

const t = {
  title: "MelodyMind Podcasts",
  subtitle: "Feel-good music journeys with Daniel & Annabelle",
  description:
    "Settle in, press play, and wander through the stories behind the songs. Daniel & Annabelle take you from vinyl crackle to streaming sheen ‚Äî meeting rebels, dreamers, and legends along the way. No dusty archive: just warm, human stories, surprising facts, and playlists you‚Äôll want to save.",
  seoDescription:
    "Discover music history through expert podcasts. Explore decades of musical evolution, from 1950s rock 'n' roll to modern streaming. Premium audio content featuring legendary artists, cultural movements, and industry insights.",
  episodes: "Episodes",
  listen: "Listen Now",
  featuredContent:
    "Discover the voices, rhythms, and revolutions that defined generations",
  totalEpisodes: " episodes available",
  availableOn: "Available on your favorite platforms:",
  spotifyUrl: "https://open.spotify.com/show/6iLbxIzJ4x5nMuuK5qySOQ",
  deezerUrl: "https://www.deezer.com/en/show/1002446242",
  youtubeUrl:
    "https://www.youtube.com/playlist?list=PLioOQ4LuNFxtx2d70QKywiPC8WVBxgXN0",
  keywords: [
    "music history podcast",
    "rock and roll",
    "music culture",
    "vintage music",
    "music documentary",
    "audio stories",
  ],
};
---

<PodcastLayout
  title={t.title}
  description={t.seoDescription}
  keywords={t.keywords}
  type="website"
  language="en"
  locale="en-US"
  seriesDescription={t.seoDescription}
>
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-12">
    <section class="relative overflow-hidden brand-card rounded-[32px] px-6 sm:px-10 py-10 sm:py-12 lg:py-14 border border-primary-20">
      <div class="absolute inset-0 opacity-70 bg-[radial-gradient(circle_at_18%_22%,rgba(246,193,119,0.08),transparent_35%),radial-gradient(circle_at_82%_12%,rgba(122,203,191,0.08),transparent_32%),radial-gradient(circle_at_70%_68%,rgba(255,149,128,0.05),transparent_38%)]"></div>
      <div class="absolute inset-6 rounded-[28px] border border-white/5 pointer-events-none"></div>
      <div class="flex flex-col gap-8 items-center text-center relative z-10">
        <div class="flex flex-wrap items-center justify-center gap-3 text-sm text-[var(--color-text-muted)]">
          <span class="inline-flex items-center gap-2 px-3 py-2 rounded-full bg-layer-2 border border-primary-20 text-[var(--color-text)] shadow-inner">
            üéôÔ∏è Sound-rich storytelling
          </span>
          <span class="inline-flex items-center gap-2 px-3 py-2 rounded-full bg-layer-1 border border-primary-20 text-[var(--color-text)]">
            Warm studio vibes, hi-fi polish
          </span>
        </div>

        <div class="space-y-4 max-w-3xl">
          <h1
            class="text-4xl sm:text-5xl lg:text-6xl font-extrabold leading-tight brand-gradient-text drop-shadow-[0_18px_40px_rgba(0,0,0,0.4)]"
          >
            {t.title}
          </h1>
          <p class="text-lg sm:text-xl font-semibold text-[var(--color-text)]">
            {t.subtitle}
          </p>
          <p class="text-base sm:text-lg text-[var(--color-text-muted)] leading-relaxed">
            {t.description}
          </p>
        </div>

        <div class="relative w-full max-w-3xl">
          <div class="absolute -inset-4 bg-gradient-to-br from-[rgba(246,193,119,0.07)] via-transparent to-[rgba(122,203,191,0.05)] blur-2xl rounded-[32px]"></div>
          <div class="relative overflow-hidden rounded-[26px] border border-primary-30 bg-layer-4 shadow-[0_20px_60px_rgba(0,0,0,0.45)]">
            <div class="absolute top-4 right-4 inline-flex items-center gap-2 px-3 py-2 rounded-full bg-black/55 text-xs font-semibold border border-white/10 backdrop-blur">
              üîÜ Analog glow, hi-fi clarity
            </div>
            <img
              src="/the-melody-mind-podcast.jpg"
              alt="Illustrated cover art"
              class="w-full h-full object-cover"
              loading="lazy"
              decoding="async"
            />
          </div>
        </div>

        <div class="grid gap-3 sm:grid-cols-2 w-full max-w-4xl">
          <div class="flex items-start gap-3 rounded-xl bg-layer-1/90 border border-primary-20 p-4 shadow-[0_12px_30px_rgba(0,0,0,0.25)] text-left">
            <span aria-hidden="true">üéß</span>
            <div class="text-sm text-[var(--color-text)] leading-snug">
              New episodes perfect for a walk, commute, or cozy night in.
            </div>
          </div>
          <div class="flex items-start gap-3 rounded-xl bg-layer-1/90 border border-primary-20 p-4 shadow-[0_12px_30px_rgba(0,0,0,0.25)] text-left">
            <span aria-hidden="true">‚ú®</span>
            <div class="text-sm text-[var(--color-text)] leading-snug">
              Stories first, facts second: always warm, curious, and welcoming.
            </div>
          </div>
          <div class="flex items-start gap-3 rounded-xl bg-layer-1/90 border border-primary-20 p-4 sm:col-span-2 shadow-[0_12px_30px_rgba(0,0,0,0.25)] text-left">
            <span aria-hidden="true">üé∂</span>
            <div class="text-sm text-[var(--color-text)] leading-snug">
              From rock ‚Äôn‚Äô roll sparks to electronic fireworks ‚Äî hear how music became the soundtrack of our lives.
            </div>
          </div>
        </div>

        <div class="flex flex-wrap justify-center gap-3">
          <a
            href="#episodes-heading"
            class="inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl text-sm font-semibold bg-[var(--color-primary)] text-ink-dark shadow-[0_12px_28px_rgba(0,0,0,0.4)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)] hover:-translate-y-0.5 transition-transform"
          >
            Browse episodes
          </a>
          <a
            href="/rss.xml"
            class="inline-flex items-center gap-2 px-4 py-3 rounded-xl border border-primary-20 bg-layer-1 text-[var(--color-text)] hover:-translate-y-0.5 transition-transform focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)]"
            aria-label="Subscribe to RSS feed"
          >
            <svg
              class="w-4 h-4"
              viewBox="0 0 24 24"
              fill="currentColor"
              aria-hidden="true"
            >
              <path
                d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248S0 22.546 0 20.752s1.456-3.248 3.252-3.248 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"
              ></path>
            </svg>
            RSS feed
          </a>
        </div>

        <div class="flex flex-wrap justify-center gap-4 text-sm text-[var(--color-text)]">
          <span class="inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-layer-2 border border-primary-20 shadow-inner">
            <svg
              class="w-4 h-4 text-[var(--color-primary)]"
              fill="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
              ></path>
            </svg>
            <span aria-label={`${podcasts.length} ${t.totalEpisodes}`}>
              {podcasts.length}
              {t.totalEpisodes}
            </span>
          </span>
          <span class="inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-layer-2 border border-primary-20 shadow-inner">
            <svg
              class="w-4 h-4 text-[var(--color-secondary)]"
              fill="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
              ></path>
            </svg>
            {t.featuredContent}
          </span>
        </div>
      </div>
    </section>

    <SearchBar total={podcasts.length} />
    <section aria-labelledby="episodes-heading">
      <h2
        id="episodes-heading"
        class="text-3xl font-bold brand-gradient-text mb-8 drop-shadow-[0_12px_30px_rgba(0,0,0,0.35)]"
      >
        {t.episodes}
      </h2>

      <div
        class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6 sm:gap-8"
        role="list"
        id="episodes-list"
      >
        {
          podcasts.map((podcast) => (
            <article
              data-episode
              data-search={`${podcast.title} ${podcast.description}`}
              class="brand-card rounded-2xl overflow-hidden transition-all duration-300 hover:-translate-y-2 hover:shadow-[var(--shadow-strong)] focus-within:shadow-[var(--shadow-strong)] focus-within:-translate-y-1 border border-primary-20 card-fade-in"
              role="listitem"
            >
              <div class="aspect-3/2 overflow-hidden relative">
                <img
                  src={`/images/${podcast.imageUrl}.jpg`}
                  alt={`Cover image for ${podcast.title} podcast episode`}
                  class="w-full h-full object-cover transition-transform duration-300 hover:scale-105"
                  loading="lazy"
                  decoding="async"
                  width={600}
                  height={400}
                />
                {podcast.durationSeconds && (
                  <span class="absolute bottom-3 right-3 rounded-full bg-black/70 px-3 py-1 text-xs font-semibold text-white backdrop-blur ring-1 ring-white/10 shadow-lg">
                    {Math.floor(podcast.durationSeconds / 60)} min
                  </span>
                )}
              </div>
              <div class="p-4 sm:p-6 flex flex-col gap-3">
                <h3 class="text-lg sm:text-xl font-semibold text-[var(--color-text)]">
                  {podcast.title}
                </h3>
                <p class="text-[var(--color-text-muted)] leading-relaxed line-clamp-3">
                  {podcast.description}
                </p>
                <a
                  href={`/${podcast.id}`}
                  class="inline-flex items-center gap-2 brand-button px-5 py-3 rounded-lg font-semibold text-sm transition-transform duration-200 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)] self-start hover:-translate-y-0.5"
                  aria-label={`Listen to ${podcast.title} podcast episode`}
                >
                  <svg
                    class="w-4 h-4 text-ink-dark"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                    aria-hidden="true"
                  >
                    <path d="M8 5v14l11-7z" />
                  </svg>
                  {t.listen}
                </a>
              </div>
            </article>
          ))
        }
      </div>
    </section>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll(".card-fade-in").forEach((el, idx) => {
        window.requestAnimationFrame(() => {
          setTimeout(() => el.classList.add("ready"), 40 * (idx + 1));
        });
      });
    });
  </script>
</PodcastLayout>
